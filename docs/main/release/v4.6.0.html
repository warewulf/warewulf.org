

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>v4.6.0 Release Notes &mdash; Warewulf User Guide main documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a8da1a53"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="v4.6.1 Release Notes" href="v4.6.1.html" />
    <link rel="prev" title="warewulf.conf(5)" href="../reference/man5/warewulf.conf.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Warewulf User Guide
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/provisioning.html">The Provisioning Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/network.html">Network Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/el-quickstart.html">Enterprise Linux Quickstart (Rocky Linux, CentOS, and RHEL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/suse-quickstart.html">SUSE Quickstart (openSUSE Leap and SLES)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/debian-quickstart.html">Debian Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Server</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../server/installation.html">Server Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/wwctl.html">Controlling Warewulf (wwctl)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/configuration.html">Server Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/dnsmasq.html">Using dnsmasq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/bootloaders.html">Bootloaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/upgrade.html">Upgrading Warewulf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server/api.html">REST API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Nodes and Profiles</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nodes/nodes.html">Cluster Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodes/profiles.html">Node Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodes/network.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodes/ipmi.html">IPMI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodes/disks.html">Disks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Images</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../images/images.html">Node Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../images/kernel.html">Image Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../images/syncuser.html">Syncuser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../images/selinux.html">SELinux</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Overlays</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overlays/overlays.html">Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overlays/templates.html">Templating</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/known-issues.html">Known issues</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/development-environment.html">Development Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/debugging.html">Debugging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Command Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl.html">wwctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_clean.html">wwctl clean</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure.html">wwctl configure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure_dhcp.html">wwctl configure dhcp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure_hostfile.html">wwctl configure hostfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure_nfs.html">wwctl configure nfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure_ssh.html">wwctl configure ssh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure_tftp.html">wwctl configure tftp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_configure_warewulfd.html">wwctl configure warewulfd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image.html">wwctl image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_build.html">wwctl image build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_copy.html">wwctl image copy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_delete.html">wwctl image delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_exec.html">wwctl image exec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_import.html">wwctl image import</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_kernels.html">wwctl image kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_list.html">wwctl image list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_rename.html">wwctl image rename</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_shell.html">wwctl image shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_show.html">wwctl image show</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_image_syncuser.html">wwctl image syncuser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node.html">wwctl node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_add.html">wwctl node add</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_console.html">wwctl node console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_delete.html">wwctl node delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_edit.html">wwctl node edit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_export.html">wwctl node export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_import.html">wwctl node import</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_list.html">wwctl node list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_sensors.html">wwctl node sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_set.html">wwctl node set</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_node_status.html">wwctl node status</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay.html">wwctl overlay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_build.html">wwctl overlay build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_chmod.html">wwctl overlay chmod</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_chown.html">wwctl overlay chown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_create.html">wwctl overlay create</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_delete.html">wwctl overlay delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_edit.html">wwctl overlay edit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_import.html">wwctl overlay import</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_info.html">wwctl overlay info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_list.html">wwctl overlay list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_mkdir.html">wwctl overlay mkdir</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_overlay_show.html">wwctl overlay show</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power.html">wwctl power</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power_cycle.html">wwctl power cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power_off.html">wwctl power off</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power_on.html">wwctl power on</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power_reset.html">wwctl power reset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power_soft.html">wwctl power soft</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_power_status.html">wwctl power status</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_profile.html">wwctl profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_profile_add.html">wwctl profile add</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_profile_delete.html">wwctl profile delete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_profile_edit.html">wwctl profile edit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_profile_list.html">wwctl profile list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_profile_set.html">wwctl profile set</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_server.html">wwctl server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_ssh.html">wwctl ssh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_upgrade.html">wwctl upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_upgrade_config.html">wwctl upgrade config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_upgrade_nodes.html">wwctl upgrade nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/wwctl_version.html">wwctl version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/man5/nodes.conf.html">nodes.conf(5)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/man5/warewulf.conf.html">warewulf.conf(5)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Notes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">v4.6.0</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upgrade">Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-default-profile">The default profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#images">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kernels">Kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overlays">Overlays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#templates">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-overlays">Network Overlays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#profiles">Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resources">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nfs-mounts">NFS Mounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#syncuser">Syncuser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#network-boot-and-wwinit">Network Boot and wwinit</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ipmi">IPMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cli">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debian-ubuntu">Debian/Ubuntu</a></li>
<li class="toctree-l2"><a class="reference internal" href="#server">Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dhcp-server">DHCP Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#for-warewulf-developers">For Warewulf Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="v4.6.1.html">v4.6.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="v4.6.2.html">v4.6.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="v4.6.3.html">v4.6.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="v4.6.4.html">v4.6.4</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Warewulf User Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">v4.6.0 Release Notes</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/warewulf/warewulf/blob/main/userdocs/release/v4.6.0.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="v4-6-0-release-notes">
<h1>v4.6.0 Release Notes<a class="headerlink" href="#v4-6-0-release-notes" title="Link to this heading"></a></h1>
<p>v4.6.0 is a significant upgrade, with many changes relative to the v4.5.x
series.</p>
<p>Particularly significant changes, especially those affecting the user interface,
are described below. Additional changes not impacting the user interface are
listed in the <a class="reference external" href="https://github.com/warewulf/warewulf/blob/main/CHANGELOG.md">CHANGELOG</a>.</p>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h2>
<p>The <a class="reference external" href="https://warewulf.org/docs/">user documentation</a> has been significantly refactored and re-written. The
majority of changes mentioned here should be documented in more detail there, as
well, and the reorganization and deduplication supports better documentation
maintenance in the future.</p>
<p>The documentation also now includes complete and automatically-generated
references for all <code class="docutils literal notranslate"><span class="pre">wwctl</span></code> commands, sub-comands, and options.</p>
</section>
<section id="upgrade">
<h2>Upgrade<a class="headerlink" href="#upgrade" title="Link to this heading"></a></h2>
<p>Warewulf v4.6.0 adds the <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">upgrade</span></code> command to assist with upgrading from
previous versions of Warewulf v4. This command updates existing configuration
files for use with the current version.</p>
<p>There are two subcommands:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">upgrade</span> <span class="pre">config</span></code> updates <code class="docutils literal notranslate"><span class="pre">warewulf.conf</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">upgrade</span> <span class="pre">nodes</span></code> updates <code class="docutils literal notranslate"><span class="pre">nodes.conf</span></code>.</p></li>
</ul>
<p>Both of these will attempt to update their respective configuration file
in-place, retaining a copy of the previous version with a <code class="docutils literal notranslate"><span class="pre">-old</span></code> suffix.
Alternatively, you can see what each command will do by specifying an
<code class="docutils literal notranslate"><span class="pre">--output-path=-</span></code> option, to direct the output of the command to “standard
out.”</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">upgrade</span> <span class="pre">nodes</span></code> additionally requires two options to be specified:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--add-defaults</span></code> adds default settings to the default profile when those
settings are absent. If you <em>do not</em> wish to add defaults, specify
<code class="docutils literal notranslate"><span class="pre">--add-defaults=false</span></code>.</p>
<p>For more information, see the section on the default profile, below.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--replace-overlays</span></code> replaces any reference to the “generic” or “wwinit”
overlays with a new set of overlays that replace their behavior. Because an
overlay named “wwinit” is present in both the legacy and the upgraded state,
<code class="docutils literal notranslate"><span class="pre">--replace-overlays</span></code> is <strong>not</strong> idempotent, and should only be used once. If
you <em>do not</em> wish to replace overlays, specify <code class="docutils literal notranslate"><span class="pre">--replace-overlays=false</span></code>.</p>
<p>For more information, see the section on overlays, below.</p>
</li>
</ul>
</section>
<section id="the-default-profile">
<h2>The default profile<a class="headerlink" href="#the-default-profile" title="Link to this heading"></a></h2>
<p>At various points Warewulf v4 has had a number of built-in default settings.
These settings were once “compiled in,” and more recently were moved to a
dedicated <code class="docutils literal notranslate"><span class="pre">defaults.conf</span></code> file. In v4.6.0 these defaults have been moved to
the default profile, and are included in <code class="docutils literal notranslate"><span class="pre">nodes.conf</span></code> for new installations.</p>
<p>A legacy configuration from a previous Warewulf installation can be updated to
include recommended defaults using <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">upgrade</span> <span class="pre">nodes</span> <span class="pre">--add-defaults</span></code>. (For
more information, refer to the section on upgrades, above.)</p>
<p>If the default overlay exists, it will be automatically (and explicitly)
included by new nodes created with <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">node</span> <span class="pre">add</span></code>. It is otherwise not
“special,” and may be removed if a different organization is preferred.</p>
<p>A few <code class="docutils literal notranslate"><span class="pre">wwctl</span></code> commands have previously had <code class="docutils literal notranslate"><span class="pre">--setdefault</span></code> options to
automatically update the default profile: these options have been removed in
v4.6.0.</p>
</section>
<section id="images">
<h2>Images<a class="headerlink" href="#images" title="Link to this heading"></a></h2>
<p>One of the more visible changes to Warewulf in v4.6.0: “containers” have been
renamed to “images” (more specifically, “node images”) throughout the interface,
documentation, and even code. This decision (requested by the user community) is
meant to alleviate confusion regarding whether Warewulf “containers” are “real”
containers running on a container runtime with potential performance and
operational consequences.</p>
<p>Warewulf “containers” have never been “virtualized” or executed with a container
runtime. Rather, the name “container” was selected to imply the integration in
v4 with the container ecosystem of tooling for defining, building, storing, and
testing node images. But this terminology ended up causing persistent confusion,
so a more industry-standard “node image” terminology has been adopted in stead.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">container</span></code> command is retained as an alias for the new <code class="docutils literal notranslate"><span class="pre">wwctl</span>
<span class="pre">image</span></code> command. The variables <code class="docutils literal notranslate"><span class="pre">.Container</span></code> and <code class="docutils literal notranslate"><span class="pre">.ContainerName</span></code> are also
retained as overlay template variables. These backwards-compatibility retentions
will continue to work through the v4.6.x series.</p>
<p>There are smaller changes to the image system, as well:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">shell</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">WW_HISTFILE</span></code> environment variable to
save shell history _inside_ the image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">shell</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">WW_PS1</span></code> environment variable to
specify the prompt for the interactive shell. The default prompt has also been
updated to indicate the current directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">import</span></code> now supports <code class="docutils literal notranslate"><span class="pre">--username</span></code> and <code class="docutils literal notranslate"><span class="pre">--password</span></code>
parameters for authenticating to a secure OCI registry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">import</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">--nohttps</span></code> parameter to use HTTP,
rather than HTTPS, when importing an image from an OCI registry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">import</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">--platform</span></code> parameter to specify a
different target architecture (e.g.., for importing an aarch64 image into an
x86_64 Warewulf server). This simplifies importing images in a
multi-architecture environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">&lt;exec|shell|copy&gt;</span></code> all now support a <code class="docutils literal notranslate"><span class="pre">--build</span></code> flag to
control whether the image should be automatically rebuilt after the operation.
(For <code class="docutils literal notranslate"><span class="pre">exec</span></code> and <code class="docutils literal notranslate"><span class="pre">shell</span></code> the default value is “true”, and may be disabled
with <code class="docutils literal notranslate"><span class="pre">--build=false</span></code>. For <code class="docutils literal notranslate"><span class="pre">copy</span></code> the default value is “false”, and may be
enabled with <code class="docutils literal notranslate"><span class="pre">--build</span></code> or <code class="docutils literal notranslate"><span class="pre">--build=true</span></code>.)</p></li>
<li><p>Warewulf v4.5 used the permissions on an image’s <code class="docutils literal notranslate"><span class="pre">rootfs/</span></code> directory to
determine a “read-only” state of the image. This behavior is now replaced with
a sentinel <code class="docutils literal notranslate"><span class="pre">readonly</span></code> file stored alongside <code class="docutils literal notranslate"><span class="pre">rootfs/</span></code> in the image
“chroot” directory. (For more information, see the “known issues” section in
the Warewulf documentation.)</p></li>
</ul>
</section>
<section id="kernels">
<h2>Kernels<a class="headerlink" href="#kernels" title="Link to this heading"></a></h2>
<p>Warewulf v4.6.0 removes the <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">kernel</span></code> command, and all its subcommands,
along with the <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">&lt;node|profile&gt;</span> <span class="pre">&lt;add|set&gt;</span> <span class="pre">--kerneloverride</span></code> parameter.
All kernels are now provisioned from an associated node image. If more than one
kernel is present in the image, Warewulf uses the highest-version, non-debug
kernel; but an explicit kernel version or kernel path can be specified with
<code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">&lt;node|profile&gt;</span> <span class="pre">&lt;add|set&gt;</span> <span class="pre">--kernelversion</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">kernels</span></code> provides a new interface to show what kernels are
available in each image, along with information regarding the detected version,
whether the kernel is the “default” for the image, and how many nodes are
configured to use it. (If no version is specified, the detected kernel version
is provided to overlay templates as <code class="docutils literal notranslate"><span class="pre">.Kernel.Version</span></code>).</p>
<p>Kernel arguments are also now represented as a list, rather than as a flat
string. This allows kernel arguments to be combined from various levels (e.g.,
profiles and the node) without having to re-specify the full argument list.
However, this also means that kernel arguments must be explicitly <em>negated</em> to
remove them from prior specification. (For example, you might need to specify
both <code class="docutils literal notranslate"><span class="pre">~crashkernel=no</span></code> and <code class="docutils literal notranslate"><span class="pre">crashkernel=512MB</span></code>.) List arguments to <code class="docutils literal notranslate"><span class="pre">wwctl</span>
<span class="pre">&lt;node|profile&gt;</span> <span class="pre">&lt;add|set&gt;</span></code> may be comma-separated; so arguments that <em>contain</em> a
comma must now be quoted on the command-line. (e.g., <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">profile</span> <span class="pre">set</span> <span class="pre">default</span>
<span class="pre">--cluster</span> <span class="pre">oso</span>&#160; <span class="pre">--kernelargs</span> <span class="pre">'console=tty0,&quot;console=ttyS0,115200&quot;'</span></code>)</p>
</section>
<section id="overlays">
<h2>Overlays<a class="headerlink" href="#overlays" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">overlay</span> <span class="pre">build</span></code> has been enhanced to build overlays in parallel, and has
also been made significantly more efficient. As a result, building overlay
images for large clusters now takes significantly less time. By default, the
number of parallel workers is equal to the number of CPUs on the Warewulf
server; this can be adjusted with a new <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">overlay</span> <span class="pre">&lt;import|build&gt;</span>
<span class="pre">--workers=0</span></code> parameter.</p>
<p>The “wwinit” and “generic” overlays have been split into multiple overlays based
on discrete functionality. Their equivalents may be substituted using <code class="docutils literal notranslate"><span class="pre">wwctl</span>
<span class="pre">upgrade</span> <span class="pre">nodes</span> <span class="pre">--replace-overlays</span></code>. (See the section on upgrading above.) This
supports more precise removal of default overlay functionality from a given node
or profile by removing only a subset of the default overlays. (For example, you
may wish to include only one of the network management overlays,
<code class="docutils literal notranslate"><span class="pre">NetworkManager</span></code>, <code class="docutils literal notranslate"><span class="pre">ifcfg</span></code>, <code class="docutils literal notranslate"><span class="pre">wicked</span></code>, or <code class="docutils literal notranslate"><span class="pre">debian.interfaces</span></code>.)</p>
<p>Overlays have been further separated into “distribution” and “site” overlays.
All overlays provided with Warewulf are “distribution” overlays, and should not
be modified. New overlays, and modifications to distribution overlays, are
stored as “site” overlays. Site overlays are retained between Warewulf upgrades,
and take precedence over a distribution overlay of the same name.</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">overlay</span> <span class="pre">build</span> <span class="pre">--host</span></code> and <code class="docutils literal notranslate"><span class="pre">--nodes</span></code> have been removed to clarify that
the host overlay is not “built.” To support development and debugging of the
host overlay, <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">overlay</span> <span class="pre">show</span> <span class="pre">--render=host</span></code> now renders overlay templates
as they would be applied to the Warewulf server. #623</p>
<p>There are smaller changes to the overlay system, as well:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">&lt;node|profile&gt;</span> <span class="pre">&lt;add|set&gt;</span> <span class="pre">[--system-overlays|--runtime-overlays]</span></code>
replaces <code class="docutils literal notranslate"><span class="pre">--wwinit</span></code> and <code class="docutils literal notranslate"><span class="pre">--runtime</span></code>, respectively. (The original flags are
retained, but deprecated.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">overlay</span> <span class="pre">show</span> <span class="pre">--render</span></code> can now accept the path to a template without
its <code class="docutils literal notranslate"><span class="pre">.ww</span></code> suffix.</p></li>
</ul>
</section>
<section id="templates">
<h2>Templates<a class="headerlink" href="#templates" title="Link to this heading"></a></h2>
<p>Overlay templates now have access to the full suite of <a class="reference external" href="https://github.com/Masterminds/sprig">Sprig template
functions.</a> Use of the local <code class="docutils literal notranslate"><span class="pre">tr</span></code> and
<code class="docutils literal notranslate"><span class="pre">slice</span></code> template functions in the distribution overlays has been replaced with
their Sprig equivalents (<code class="docutils literal notranslate"><span class="pre">replace</span></code> and <code class="docutils literal notranslate"><span class="pre">substr</span></code>, respectively).</p>
<p>An additional template function, <a class="reference internal" href="../overlays/templates.html#uniquefield"><span class="std std-ref">UniqueField</span></a>, was added to facilitate
removing duplicate <code class="docutils literal notranslate"><span class="pre">passwd</span></code> and <code class="docutils literal notranslate"><span class="pre">group</span></code> entries in the <code class="docutils literal notranslate"><span class="pre">syncuser</span></code> overlay.
(For more information, see the section on syncuser, below.)</p>
<p>A set of new template functions, <a class="reference internal" href="../overlays/templates.html#importlink"><span class="std std-ref">ImportLink</span></a>, <a class="reference internal" href="../overlays/templates.html#softlink"><span class="std std-ref">softlink</span></a>, and
<a class="reference internal" href="../overlays/templates.html#readlink"><span class="std std-ref">readlink</span></a>, add support for creating symbolic links from overlay templates.</p>
<p>The new <a class="reference internal" href="../overlays/overlays.html#localtime"><span class="std std-ref">localtime</span></a> overlay configures the timezone of a cluster node.</p>
</section>
<section id="network-overlays">
<h2>Network Overlays<a class="headerlink" href="#network-overlays" title="Link to this heading"></a></h2>
<p>The network overlays now support <a class="reference internal" href="../nodes/network.html#vlan"><span class="std std-ref">VLAN tagging</span></a>, and <a class="reference internal" href="../nodes/network.html#static-routes"><span class="std std-ref">static
routes</span></a>, and have improved support for configuring a
<a class="reference internal" href="../nodes/network.html#bonding"><span class="std std-ref">network bond.</span></a> They also now support specifying a <a class="reference internal" href="../overlays/overlays.html#dns"><span class="std std-ref">DNS
search path.</span></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all functionality is supported by all network overlays.</p>
</div>
<p>There are smaller changes to the network overlays, as well:</p>
<ul class="simple">
<li><p>The NetworkManager overlay now prevents interfaces without a specified
<code class="docutils literal notranslate"><span class="pre">Ipaddr</span></code> from activating DHCP.</p></li>
<li><p>The NetworkManager overlay now only marks interfaces “unmanaged” if they have
neither a <code class="docutils literal notranslate"><span class="pre">Device</span></code> name nor an <code class="docutils literal notranslate"><span class="pre">Hwaddr</span></code> specified.</p></li>
</ul>
</section>
<section id="profiles">
<h2>Profiles<a class="headerlink" href="#profiles" title="Link to this heading"></a></h2>
<p>Node profiles now support profiles themselves, allowing for complex nested
hierarchies of nested profiles.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nodeprofiles</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span>
<span class="w">    </span><span class="nt">profiles</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rocky</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">net</span>
<span class="w">  </span><span class="nt">rocky</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rockylinux-9</span>
<span class="w">  </span><span class="nt">net</span><span class="p">:</span>
<span class="w">    </span><span class="nt">network devices</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">        </span><span class="nt">netmask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">255.255.255.0</span>
<span class="w">        </span><span class="nt">gateway</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.1.1</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">n1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">profiles</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">    </span><span class="nt">network devices</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ipaddr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.1.101</span>
</pre></div>
</div>
</section>
<section id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Link to this heading"></a></h2>
<p>Resources are similar to tags except that their value is an arbitrary data
structure rather than just a string. This data is represented as YAML data in
<code class="docutils literal notranslate"><span class="pre">nodes.conf</span></code>, and these data structures may then be referenced by overlay
templates to implement more expressive cluster behavior.</p>
<p>Resources can currently only be defined with <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">&lt;node|profile&gt;</span> <span class="pre">edit</span></code>, or
by editing <code class="docutils literal notranslate"><span class="pre">nodes.conf</span></code> directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Resources are defined only at the root of nodes (and profiles), not on
network interfaces and IPMI interfaces.</p>
</div>
<p>The premiere use of resources is in the refactoring of NFS client configuration.</p>
</section>
<section id="nfs-mounts">
<h2>NFS Mounts<a class="headerlink" href="#nfs-mounts" title="Link to this heading"></a></h2>
<p>Cluster node NFS mounts are no longer configured in <code class="docutils literal notranslate"><span class="pre">warewulf.conf</span></code>. In stead,
a new <code class="docutils literal notranslate"><span class="pre">fstab</span></code> overlay configures NFS (or any other) mounts on cluster nodes
based on an <code class="docutils literal notranslate"><span class="pre">fstab</span></code> resource definition.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nodeprofiles</span><span class="p">:</span>
<span class="w">  </span><span class="nt">default</span><span class="p">:</span>
<span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">      </span><span class="nt">fstab</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warewulf:/home</span>
<span class="w">          </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home</span>
<span class="w">          </span><span class="nt">vfstype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nfs</span>
<span class="w">          </span><span class="nt">mntops</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults,nofail</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">warewulf:/opt</span>
<span class="w">          </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/opt</span>
<span class="w">          </span><span class="nt">vfstype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nfs</span>
<span class="w">          </span><span class="nt">mntops</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults,noauto,nofail,ro</span>
</pre></div>
</div>
</section>
<section id="syncuser">
<h2>Syncuser<a class="headerlink" href="#syncuser" title="Link to this heading"></a></h2>
<p>“Syncuser” has always been optional, but the output of certain commands has been
updated to no longer imply that not running syncuser is an error condition. The
<code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">build</span> <span class="pre">--syncuser</span></code> now explicitly opts-in to automatic syncuser
during image build, and the <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">image</span> <span class="pre">syncuser</span> <span class="pre">--write</span></code> parameter is now
automatically enabled. (Specify <code class="docutils literal notranslate"><span class="pre">--write=false</span></code> to disable.)</p>
<p>Some syncuser functionality is now implemented in a new <code class="docutils literal notranslate"><span class="pre">syncuser</span></code> overlay.
While this overlay <em>is</em> supplied by <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">upgrade</span> <span class="pre">nodes</span> <span class="pre">--replace-overlays</span></code>,
it is not included by default in the initial <code class="docutils literal notranslate"><span class="pre">nodes.conf</span></code> in new deployments.</p>
<p>There are smaller changes to the syncuser, as well:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">syncuser</span></code> overlay now looks for the <code class="docutils literal notranslate"><span class="pre">passwd</span></code> and <code class="docutils literal notranslate"><span class="pre">group</span></code> databases
in <code class="docutils literal notranslate"><span class="pre">sysconfdir</span></code>, rather than explicitly in <code class="docutils literal notranslate"><span class="pre">/etc/</span></code>. This change is
primarily to support testing; but it does mean that if <code class="docutils literal notranslate"><span class="pre">sysconfdir</span></code> is a
path other than <code class="docutils literal notranslate"><span class="pre">/etc/</span></code> then these databases must be provided explicitly
(e.g., by copying them or symlinking them into <code class="docutils literal notranslate"><span class="pre">sysconfdir</span></code>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">syncuser</span></code> overlay now skips duplicate users and groups when generating
synchronized <code class="docutils literal notranslate"><span class="pre">passwd</span></code> and <code class="docutils literal notranslate"><span class="pre">group</span></code> databases.</p></li>
</ul>
</section>
<section id="network-boot-and-wwinit">
<h2>Network Boot and wwinit<a class="headerlink" href="#network-boot-and-wwinit" title="Link to this heading"></a></h2>
<p>The network boot and wwinit process have been made more consistent and verbose
for both iPXE and GRUB methods. Additional output and logging provides more
information about each step of the process as it happens to aid in
troubleshooting. And available network boot options are now presented using an
iPXE menu, allowing a specific method to be selected without using a custom iPXE
script.</p>
<p>Utilizing the new iPXE menu, specifying an <code class="docutils literal notranslate"><span class="pre">IPXEMenuEntry</span></code> tag on a cluster
node now selects the boot method to use, similar to the previously-existing
<code class="docutils literal notranslate"><span class="pre">GrubMenuEntry</span></code>. The <code class="docutils literal notranslate"><span class="pre">dracut.ipxe</span></code> script has now been merged into the
default iPXE script, and specifying <code class="docutils literal notranslate"><span class="pre">IPXEMenuEntry=dracut</span></code> now replaces
specifying a discrete <code class="docutils literal notranslate"><span class="pre">dracut</span></code> iPXE template.</p>
<p>An issue that prevented nodes from booting in some circumstances with the
Warewulf server configured in “secure” mode have also been resolved: now, if the
runtime overlay cannot be downloaded during boot, boot proceeds regardless, and
<code class="docutils literal notranslate"><span class="pre">wwclient</span></code> applies the runtime overlay after boot when it is able to control
its source port.</p>
</section>
<section id="ipmi">
<h2>IPMI<a class="headerlink" href="#ipmi" title="Link to this heading"></a></h2>
<p>The IPMI system has been refactored to use templates to define the required IPMI
template from the cluster node configuration. This is expected to support
additional BMC implementation in the future.</p>
</section>
<section id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Link to this heading"></a></h2>
<p>There have been many enhancements to the <code class="docutils literal notranslate"><span class="pre">wwctl</span></code> command:</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span></code> has been updated to use a different table-formatting library that
produces more natural output without extraneous whitespace padding.</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span></code> has been updated to add hostlist support to <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">wwctl</span>
<span class="pre">overlay</span> <span class="pre">build</span></code>. Hostlists have also been enhanced to support comma-separated
hostlist patterns. (e.g., <code class="docutils literal notranslate"><span class="pre">n[1-2],n5,n[8-9]</span></code>) Other pattern formats (regular
expressions and globs) are no longer supported.</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span></code> has been updated to add “tab completions” for additional parameters.</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">&lt;node|profile&gt;</span> <span class="pre">list</span> <span class="pre">[--yaml|--json]</span></code> generates machine-readable output
in YAML and JSON format, and <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">node</span> <span class="pre">export</span></code> has been updated to match,
including indicating node IDs.</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span></code> now return a non-zero exit code on error.</p>
<p>There are smaller changes to <code class="docutils literal notranslate"><span class="pre">wwctl</span></code>, as well:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">&lt;node|profile&gt;</span> <span class="pre">list</span> <span class="pre">--fullall</span></code> has been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">clean</span></code> removes the OCI cache and vestigial overlay images from
deleted nodes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">container</span> <span class="pre">exec</span></code> no longer requires a double hyphen (<code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">--</span></code>) before
flags.</p></li>
</ul>
</section>
<section id="debian-ubuntu">
<h2>Debian/Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Link to this heading"></a></h2>
<p>Warewulf v4.6.0 does not yet fully support Debian or Ubuntu; but there have been
multiple improvements towards future support:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">warewulfd</span></code> can now detect Ubuntu-style Dracut initrd images.</p></li>
<li><p>A new <code class="docutils literal notranslate"><span class="pre">netplan</span></code> overlay adds support for modern Debian/Ubuntu network
configuration.</p></li>
<li><p>Multiple internal shell scripts have been updated for POSIX compatibility to
support internal use of shells other than Bash.</p></li>
</ul>
</section>
<section id="server">
<h2>Server<a class="headerlink" href="#server" title="Link to this heading"></a></h2>
<p>The Warewulf server daemon (<code class="docutils literal notranslate"><span class="pre">warewulfd</span></code>) has been refactored to more closely
behave like a <a class="reference external" href="https://12factor.net/">12-factor app</a>. As such, the ability to
daemonize has been removed (as have the daemon management commands, <code class="docutils literal notranslate"><span class="pre">wwctl</span>
<span class="pre">server</span> <span class="pre">&lt;start,stop,status,restart,reload&gt;</span></code>). The server now always runs in the
foreground and logs to stdout rather than to <code class="docutils literal notranslate"><span class="pre">/var/log/warewulfd.log</span></code> or
syslog.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">warewulfd.service</span></code> systemd unit has been updated to read environment
variables from <code class="docutils literal notranslate"><span class="pre">/etc/default/warewulfd</span></code>, and now references an <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code>
environment variable to supply additional arguments to the <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">server</span></code>
command. (e.g., <code class="docutils literal notranslate"><span class="pre">OPTIONS=--debug</span></code>)</p>
<p><code class="docutils literal notranslate"><span class="pre">wwctl</span></code> auto-detects some network settings if they are not specified in
<code class="docutils literal notranslate"><span class="pre">warewulf.conf</span></code>. These settings are now written back to <code class="docutils literal notranslate"><span class="pre">warewulf.conf</span></code>
after auto-detection. The <code class="docutils literal notranslate"><span class="pre">ipaddr</span></code> field of <code class="docutils literal notranslate"><span class="pre">warewulf.conf</span></code> can now also
handle a CIDR-formatted address, which internally populates the <code class="docutils literal notranslate"><span class="pre">netmask</span></code> and
<code class="docutils literal notranslate"><span class="pre">network</span></code> fields. These network fields are also provided to overlay templates
in CIDR format as <code class="docutils literal notranslate"><span class="pre">IpCIDR</span></code> and <code class="docutils literal notranslate"><span class="pre">NetworkCIDR</span></code> fields.</p>
<p>A new <code class="docutils literal notranslate"><span class="pre">warewulfd</span></code> API endpoint at
<code class="docutils literal notranslate"><span class="pre">/overlay-file/{overlay}/{path...}?render={id}</span></code> supports fetching (and
rendering) arbitrary overlay files.</p>
<p>There are smaller changes to the server, as well:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">configure</span> <span class="pre">ssh</span></code> now generates ed25519 keys by default.</p></li>
</ul>
</section>
<section id="dhcp-server">
<h2>DHCP Server<a class="headerlink" href="#dhcp-server" title="Link to this heading"></a></h2>
<p>The Warewulf server’s external DHCP service now more flexibly accounts for the
presence or absence of an address range. <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">configure</span> <span class="pre">dhcp</span></code> now generates
a DHCP configuration without a defined range, generating as much of the subnet
and range definition as possible, for either a “default” configuration or a
“static” configuration.</p>
</section>
<section id="for-warewulf-developers">
<h2>For Warewulf Developers<a class="headerlink" href="#for-warewulf-developers" title="Link to this heading"></a></h2>
<p>Finally, there are a number of changes that really only matter to Warewulf
developers:</p>
<p>The minimum Go version is now <code class="docutils literal notranslate"><span class="pre">1.22.9</span></code>, as required by updated dependencies.</p>
<p>Warewulf v4.6.0 includes a significant refactor of the internal datastructures
that represent cluster nodes. The NodeInfo structure (in-memory-only) has been
merged with NodeConf, the YAML-backed data structure. In its place, a new Field
system supports tracks the source of node fields while values are merged from
profiles for use explicitly during <code class="docutils literal notranslate"><span class="pre">wwctl</span> <span class="pre">node</span> <span class="pre">list</span> <span class="pre">--all</span></code>.</p>
<p>The primary Warewulf <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> has been enhanced with target help: just run
<code class="docutils literal notranslate"><span class="pre">make</span></code> to see a list and descriptions of notable targets.</p>
<p>The official Warewulf RPM spec file has been updated to recommend the
installation of <code class="docutils literal notranslate"><span class="pre">ipmitool</span></code>. It also simplifies the permissions of installed
files, and omits the gRPC API by default.</p>
<p>The GitHub CI process now runs “staticcheck,” and problems highlighted by it
have been resolved. Recent problems in the nightly build workflow have also been
resolved.</p>
<p>A Visual Studio Code “development container” definition is now included in the
repository.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../reference/man5/warewulf.conf.html" class="btn btn-neutral float-left" title="warewulf.conf(5)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="v4.6.1.html" class="btn btn-neutral float-right" title="v4.6.1 Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>